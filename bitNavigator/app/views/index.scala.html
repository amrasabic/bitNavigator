@(places: java.util.List[Place])

@main("bitNavigator") {

    </div> <!-- closing container div-->
    <div class="row">
        @if(flash.containsKey("error")) {
            <div class="alert alert-danger" style="width: 100%;margin-bottom: 0;text-align: center;height: 25px;padding-top: 0%; font-size:15px; font-weight: strong; vertical-align: middle">
                <button type="btn btn-warning"  class="close" data-dismiss="alert">x</button>
                Wrong email or password!
            </div>
        }
        @if(flash.containsKey("warning")) {
            <div class="alert alert-warning" style="width: 100%;margin-bottom: 0;text-align: center;height: 25px;padding-top: 0%; font-size:15px; font-weight: strong; vertical-align: middle">
                <button type="btn btn-warning"  class="close" data-dismiss="alert">x</button>
                @flash.get("warning")
            </div>
        }

    </div>

    <div id="map"></div>




    <!-- Modal -->
    <div class="modal fade modal-lg" id="view-place-modal">
        <div class="modal-dialog" role="banner">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

                </div>
                <div class="modal-body" id="jkl">
                </div>

            </div>
        </div>
    </div>



    <script>
        $(document).ready(function() {




        });
    </script>


    <div><!-- opening div-->
    <script>

        var map;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 43.850, lng: 18.390},
                zoom: 13
            });

            @for(place <- places){
                @if(place.latitude != null && place.longitude != null){console.log("@place.title");
                    var marker = new google.maps.Marker({
                        position: {lat: @place.latitude, lng: @place.longitude},
                        map: map,
                        title: "@place.title",
                        icon: "@routes.Assets.versioned(place.service.serviceIcon)"
                    });
                    marker.addListener('click', function() {
                        //window.location.href = "@routes.PlaceController.viewPlace(place.id)";
                        $.ajax({
                            method: 'get',
                            url: '@routes.PlaceController.viewPlace(place.id)',
                            data: 'isModal=true'
                        }).success(function(response) {
                            $('#jkl').append(response);
                            $('#view-place-modal').modal('show');
                            console.log(response);
                        });
                    });
                }
            }
        }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>

}
