@(contactForm: Form[UserController.Contact])

@import helper._
@main("Contact Us") {

    <h2>Contact Us</h2> <br> <br>

    @helper.form(routes.UserController.sendMail(), 'class -> "form-horizontal", 'id -> "contactForm") {
        <div class="row">
            <div class="col-md-12">
            @if(flash.containsKey("errorMail")) {
                <div class="alert alert-danger col-md-12">
                    <b style="font-size : 18 px ; color : red"><center>@flash.get("errorMail")</center></b>
                </div>
            }
            </div>
            <div class="col-md-12">
            @if(flash.containsKey("success")) {
                <div class="alert alert-success col-md-12">
                    <b style="font-size : 18 px ; color : red"><center>@flash.get("success")</center></b>
                </div>
            }
            </div>
        </div>
        <div class="row">

            <div class="input-group">
                <span class="input-group-addon" id="basic-addon1">
                    Name <abbr class="req" title="required" style="color : red"> * </abbr> </span>
                <input name="name" value="@contactForm("name").value" type="text" class="form-control" id="inputName" required="required">
                <span id="nameError" class="alert-danger" data-error-for="" ></span>
            </div>

            <div class="input-group">
                <span class="input-group-addon" id="basic-addon1">
                    Email <abbr class="req" title="required" style="color : red"> * </abbr> </span>
                <input name="email" value="@contactForm("email").value" type="text" class="form-control" id="email" required="required">
            </div>

            <div class="input-group">
                <span class="input-group-addon" id="basic-addon1">
                    Message <abbr class="req" title="required" style="color : red"> * </abbr> </span>
                <textarea style="resize : vertical" maxlength="250" name="message" value="@contactForm("message").value" type="text" class="form-control" id="message" required="required">@contactForm("message").value </textarea>
            </div>

            <div class="input-group">
                <span class="input-group-addon" id="basic-addon1">
                    Check <abbr class="req" title="required" style="color : red"> * </abbr> </span>
                <div id="captcha" class="g-recaptcha" data-sitekey="6LeK6w0TAAAAAHLerAgambJDtnxgDkKMOb4Vg43a"></div>
            </div>
            <div class="col-md-offset-2">
                <input type="submit" value="Send Message" class="btn btn-primary" />
            </div>
        </div>
    }

    <script src='https://www.google.com/recaptcha/api.js'></script>

    <script src="@routes.Assets.versioned("javascripts/fb-login.js")"></script>

        <!--
      Below we include the Login Button social plugin. This button uses
      the JavaScript SDK to present a graphical Login button that triggers
      the FB.login() function when clicked.
    -->





    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#sign-up-modal">
        Launch demo modal
    </button>

    <!-- Modal -->
    <div class="modal fade" id="sign-up-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div id="sign-up-modal-body" class="modal-body">
                    <fb:login-button class="fb-login-button" data-max-rows="1" data-size="xlarge" data-show-faces="false" data-auto-logout-link="true"
                    scope="public_profile,email" onlogin="checkLoginState();">
                        Connect with Facebook
                    </fb:login-button>

                    <div class="strike">
                        <span>Or</span>
                    </div>
                    <form class="sign-in-modal-form" method="post" action="@routes.UserController.checkSignIn()">
                        <div class="form-group">
                            <input id="email-signin" type="email" required="required" class="form-control" placeholder=" Email" name="email" onblur="checkEmail()">
                            <div class="alert alert-danger sign-in-modal-alert" data-error-for="email" role="alert" hidden></div>
                        </div>
                        <div class="form-group" id="my_form">
                            <input id="password-signin" type="password" required="required" class="form-control" placeholder=" Password" name="password">
                            <div class="alert alert-danger sign-in-modal-alert" data-error-for="password" role="alert" hidden></div>
                        </div>
                        <button id="btn-sign-in-modal" type="submit" class="btn btn-primary btn-lg" >Sign in</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function(){

            $(".sign-in-modal-form").submit(function(e, options){

                var options = options || {};
                if(options.allow == true){
                    return;
                }

                e.preventDefault();
                $("[data-error-for]").html("");
                $("[data-error-for]").hide();
                $form = $(this);

                $.ajax({
                    url: "@routes.UserController.validateSignIn()",
                    method: "post",
                    data: $(this).serialize()
                }).success(function(response){
                    $form.trigger("submit", {allow: true});
                }).error(function(response){
                    var errors = response.responseText;
                    errors = JSON.parse(errors);
                    console.log(errors);
                    var keys = Object.keys(errors);
                    for(var i = 0; i < keys.length; i++){
                        var errorMessages = errors[keys[i]];
                        var allErrors = "";
                        for(var j = 0; j < errorMessages.length; j++){
                            allErrors += errorMessages[j];
                        }
                        $('[data-error-for="'+keys[i]+'"]').html(allErrors).show();
                    }

                });
            });
        });
    </script>


    <fb:login-button class="fb-login-button" data-max-rows="1" data-size="large" data-show-faces="false" data-auto-logout-link="true"
    scope="public_profile,email" onlogin="checkLoginState();">
    </fb:login-button>

    <div id="status">
    </div>





}